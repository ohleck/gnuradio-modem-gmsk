

# GNURadio Installation procedure:
# https://github.com/gnuradio/gnuradio
# Tested on Ubuntu 19.04 x64

sudo apt update
sudo apt install zlib1g-dev

mkdir ~/code
cd ~/code
git clone https://github.com/gnuradio/pybombs.git
cd pybombs
sudo python setup.py install

pybombs recipes add gr-recipes git+https://github.com/gnuradio/gr-recipes.git  
pybombs recipes add gr-etcetera git+https://github.com/gnuradio/gr-etcetera.git

mkdir ~/code/gnuradio
cd ~/code/gnuradio
pybombs prefix init ~/code/gnuradio/default/
pybombs install gnuradio

# To run GNURadio
source ~/code/gnuradio/default/setup_env.sh
gnuradio-companion
# or (without changing the current environment)
# pybombs run gnuradio-companion



# Extra modules installation
cd ~/code
source ~/code/gnuradio/default/setup_env.sh
pybombs install gr-iio # for PlutoSDR
pybombs install gr-satellites
pybombs isntall gr-correctiq


# PlutoSDR drivers install
# Udev rules for plutoSDR (running without sudo)
wget https://wiki.analog.com/_media/university/tools/pluto/drivers/plutosdr-m2k-udev_1.0_amd64.deb
sudo dpkg -i plutosdr-m2k-udev_1.0_amd64.deb
sudo service udev restart
rm plutosdr-m2k-udev_1.0_amd64.deb






# Misc / outdated. Check if needed. 
# sudo apt install libiio-utils

#sudo apt isntall zypper
# gnuradio dependencies
sudo apt-get -y install gnuradio-dev libxml2 libxml2-dev bison flex cmake git libaio-dev libboost-all-dev swig

cd ~/code
git clone https://github.com/analogdevicesinc/libiio.git
cd libiio
cmake .
make 
sudo make install
cd ..

cd ~/code
git clone https://github.com/analogdevicesinc/libad9361-iio.git
cd libad9361-iio
cmake .
make 
sudo make install
cd ..

cd ~/code
git clone https://github.com/analogdevicesinc/gr-iio.git
cd gr-iio
cmake .
make 
sudo make install
cd ..
sudo ldconfig


